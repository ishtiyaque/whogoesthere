(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,n){e.exports=n(452)},254:function(e,t,n){},452:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(19),s=n.n(o),r=(n(254),n(20)),l=n(21),c=n(23),u=n(22),m=n(24),d=n(16),p=n(26),h=n.n(p),v=(n(136),n(91)),g=n(14),f=n.n(g),b=n(84),E=n.n(b),y=n(18),I=n.n(y),C=n(34),O=n.n(C),j=n(35),S=n.n(j),w=n(42),k=n.n(w),N=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSend=function(){var t=e.state.text;e.setState({text:null}),document.getElementById("chat-body").value="",e.props.onSend(t)},e.state={pollItems:[{beginsAt:null,until:null}],title:null,description:null,participants:null},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(O.a,{open:this.props.open,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},i.a.createElement(k.a,{id:"form-dialog-title"},"Comments"),i.a.createElement(S.a,null,(this.props.comments||[]).map(function(e){return i.a.createElement(I.a,{disabled:!0,autoFocus:!0,defaultValue:e,margin:"dense",fullWidth:!0})}),i.a.createElement(I.a,{id:"chat-body",style:{paddingTop:20,width:"75%",paddingRight:8},onChange:function(t){return e.setState({text:t.target.value})},autoFocus:!0,margin:"dense",onKeyPress:function(t){console.log("Pressed keyCode ".concat(t.key)),"Enter"===t.key&&(e.handleSend(),t.preventDefault())}}),i.a.createElement(f.a,{onClick:this.handleSend,color:"primary",style:{verticalAlign:"bottom"}},"Send!")))}}]),t}(i.a.Component),x=Object(d.withStyles)(function(e){return{button:{margin:2*e.spacing.unit,verticalAlign:"bottom"},input:{display:"none"}}})(N),_=n(56),D=n(57),T=n(4),A=n.n(T),F=n(70),B=n.n(F),L=n(85),M=n.n(L),U=n(71),H=n.n(U),P=n(87),R=n.n(P),V=n(25),z=n.n(V),W=n(126),J=n.n(W),K=n(86),Y=n.n(K),$=n(178),q=n.n($),G=n(179),Q=n.n(G),X=n(181),Z=n.n(X),ee=n(180),te=n.n(ee),ne=n(31),ae=n.n(ne),ie=n(72),oe=n.n(ie),se=(n(402),n(177)),re=n(48),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Done!";switch(e){case"info":re.NotificationManager.info(t);break;case"success":re.NotificationManager.success(t);break;case"warning":re.NotificationManager.warning(t);break;case"error":re.NotificationManager.error(t)}},ce=n(92),ue="http://wgt-optimal.c2y2jbcu8i.us-west-2.elasticbeanstalk.com",me=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){n.setState(Object(D.a)({},e,t.target.value))}},n.respondToInvitation=function(e){h.a.put("".concat(ue,"/invitations/").concat(n.props.invitationId),null,{params:{"invitation[response]":e}}).then(n.fetchInvitees)},n.inviteUser=function(){h.a.post("".concat(ue,"/events/").concat(n.props.eventId,"/invitations"),null,{params:{"invitation[user_id]":n.state.invitee}}).then(function(){n.setState({invitee:null}),le("success","User added"),n.fetchInvitees()})},n.fetchInvitees=function(){h.a.get("".concat(ue,"/events/").concat(n.props.eventId,"/invitations")).then(function(e){var t=e.data,a=t.invitations,i=t.users,o=a.map(function(e){return Object(_.a)({},e,{user:i.find(function(t){return t.id===e.user_id})})}),s=a.filter(function(e){return"yes"===e.response}).length,r=a.filter(function(e){return"no"===e.response}).length,l=a.filter(function(e){return"maybe"===e.response}).length;n.setState({invitations:o,yes:s,no:r,maybe:l})})},n.deleteInvitation=function(e){h.a.delete("".concat(ue,"/invitations/").concat(e)).then(function(){var t=n.state.invitations;n.setState({invitations:t.filter(function(t){return e!==t.id})})})},n.onExpandationChange=function(e,t){t&&n.fetchInvitees()},n.renderOptions=function(e){return i.a.createElement("div",{className:A()(n.props.classes.column,n.props.classes.helper)},i.a.createElement(f.a,{variant:"contained",color:"secondary",className:n.props.classes.button,onClick:function(){return n.respondToInvitation("no")},disabled:e},n.state.no,i.a.createElement(q.a,{className:n.props.classes.rightIcon})),i.a.createElement(f.a,{variant:"contained",className:n.props.classes.button,onClick:function(){return n.respondToInvitation("maybe")},disabled:e},n.state.maybe,i.a.createElement(Q.a,{className:n.props.classes.rightIcon})),i.a.createElement(f.a,{variant:"contained",color:"primary",className:n.props.classes.button,onClick:function(){return n.respondToInvitation("yes")},disabled:e},n.state.yes,i.a.createElement(te.a,{className:n.props.classes.rightIcon},"send")),i.a.createElement(ae.a,{onClick:function(){return n.props.openChat(n.props.eventId)},color:"primary",className:n.props.classes.button,"aria-label":"Add to shopping cart"},i.a.createElement(Z.a,{className:n.props.classes.rightIcon})))},n.renderFinalCard=function(){return i.a.createElement(M.a,{className:n.props.classes.details},i.a.createElement("div",{className:n.props.classes.column},i.a.createElement(z.a,{className:n.props.classes.secondaryHeading},"by ",n.props.creator),i.a.createElement(z.a,{className:n.props.classes.secondaryHeading},n.props.description)),i.a.createElement("div",{className:n.props.classes.column},i.a.createElement(I.a,{disabled:!0,label:"Begins at",type:"datetime-local",defaultValue:n.props.startDate.substring(0,16),className:n.props.classes.textField,InputLabelProps:{shrink:!0}}),i.a.createElement(I.a,{disabled:!0,label:"Until",type:"datetime-local",defaultValue:n.props.endDate.substring(0,16),className:n.props.classes.textField,InputLabelProps:{shrink:!0}})),n.renderOptions(!n.props.invitationId))},n.state={invitee:null,invitations:[],yes:0,no:0,maybe:0},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.location,o=t.title,s=this.state.invitations;return i.a.createElement("div",{className:n.root},i.a.createElement(B.a,{onChange:this.onExpandationChange},i.a.createElement(H.a,{expandIcon:i.a.createElement(J.a,null)},i.a.createElement("div",{className:n.column},i.a.createElement(z.a,{className:n.heading},o)),i.a.createElement("div",{className:n.column},i.a.createElement(z.a,{className:n.secondaryHeading},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35;return!Object(se.isString)(e)||e.length<t?e:e.substring(0,t-5)+"..."}(a)))),this.renderFinalCard(),i.a.createElement(Y.a,null),i.a.createElement(B.a,null,i.a.createElement(H.a,{expandIcon:i.a.createElement(J.a,null)},i.a.createElement(z.a,{className:n.secondaryHeading},"Invitees:")),i.a.createElement("div",{className:n.chipContainer},s.map(function(t){var a=t.user,o=t.id;return e.props.invitationId?i.a.createElement(oe.a,{disabled:!!e.props.invitationId,avatar:i.a.createElement(ce.a,null,a.name[0]||"!"),label:a.name,className:n.chip}):i.a.createElement(oe.a,{disabled:!!e.props.invitationId,avatar:i.a.createElement(ce.a,null,a.name[0]||"!"),label:a.name,onDelete:function(){return e.deleteInvitation(o)},className:n.chip})})),!this.props.invitationId&&i.a.createElement(R.a,null,i.a.createElement(I.a,{id:"standard-name",placeholder:"User Id",className:n.textField,value:this.state.invitee,onChange:this.handleChange("invitee"),margin:"normal"}),i.a.createElement(f.a,{onClick:this.inviteUser,size:"small",color:"primary"},"invite")))))}}]),t}(a.Component),de=Object(d.withStyles)(function(e){return{root:{width:"100%",marginBottom:e.spacing.unit},chipContainer:{display:"flex",justifyContent:"left",flexWrap:"wrap"},chip:{margin:e.spacing.unit},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,marginBottom:e.spacing.unit,width:200},button:{margin:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit}}})(me),pe=n(58),he=n(41),ve=n.n(he),ge=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){return function(n){e.setState(Object(D.a)({},t,n.target.value))}},e.deletePollItem=function(t){var n=e.state.pollItems;n.splice(t,1),e.setState({pollItems:n})},e.addPollItem=function(){var t=e.state.pollItems;t.push({beginsAt:null,until:null}),e.setState({pollItems:t})},e.setVote=function(t,n,a){var i=e.state.pollItems;t&&(i[a].beginsAt=t),n&&(i[a].until=n),e.setState({pollItems:i})},e.state={pollItems:[{beginsAt:null,until:null}],title:null,location:null,description:null,participants:null},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(O.a,{open:this.props.open,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},i.a.createElement(k.a,{id:"form-dialog-title"},"Create Event"),i.a.createElement(S.a,null,i.a.createElement(I.a,{onChange:this.handleChange("title"),autoFocus:!0,margin:"dense",id:"title",label:"Title",type:"title"}),i.a.createElement(I.a,{onChange:this.handleChange("location"),style:{marginLeft:30},autoFocus:!0,margin:"dense",id:"location",label:"Location",type:"location"}),i.a.createElement(I.a,{onChange:this.handleChange("description"),autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"description",fullWidth:!0}),E()(this.state.pollItems.length).map(function(t){return i.a.createElement(pe.b,{utils:v.a,style:{marginTop:30}},i.a.createElement(pe.a,{value:e.state.pollItems[t].beginsAt,label:"Begins at",style:{width:"33.33%",marginRight:10,marginTop:10},onChange:function(n){return e.setVote(n,null,t)}}),i.a.createElement(pe.a,{value:e.state.pollItems[t].until,label:"Until",style:{width:"33.33%",marginTop:10},onChange:function(n){return e.setVote(null,n,t)}}))})),i.a.createElement(ve.a,null,i.a.createElement(f.a,{onClick:function(){return e.props.createEvent(e.state)},color:"primary"},"Create")))}}]),t}(i.a.Component),fe=Object(d.withStyles)(function(e){return{button:{margin:2*e.spacing.unit,verticalAlign:"bottom"},input:{display:"none"}}})(ge),be=n(93),Ee=n.n(be),ye=n(74),Ie=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).normalizeEvent=function(e){var t=e.pollItems[0],a=t.beginsAt,i=t.until;return console.log(a,i),{"event[name]":e.title,"event[description]":e.description,"event[location]":e.location,"event[start_time(1i)]":a.getFullYear(),"event[start_time(2i)]":a.getMonth(),"event[start_time(3i)]":a.getDate(),"event[start_time(4i)]":a.getHours(),"event[start_time(5i)]":a.getMinutes(),"event[end_time(1i)]":i.getFullYear(),"event[end_time(2i)]":i.getMonth(),"event[end_time(3i)]":i.getDate(),"event[end_time(4i)]":i.getHours(),"event[end_time(5i)]":i.getMinutes(),"event[user_id]":n.props.userId}},n.createEvent=function(e){n.setState({dialogOpen:!1}),console.log(e);var t=n.normalizeEvent(e);h.a.post("".concat(ue,"/users/").concat(n.props.userId,"/events"),null,{params:Object(_.a)({},t)}).then(n.props.onUpdate).then(le)},n.state={dialogOpen:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.dialogOpen;return i.a.createElement("div",{style:{marginRight:50}},i.a.createElement(f.a,{variant:"contained",color:"primary",className:[t.button,t.customColor],onClick:function(){return e.setState({dialogOpen:!0})}},"Create"),i.a.createElement(f.a,{variant:"contained",color:"primary",className:[t.button,t.customColor]},"Logout"),i.a.createElement(ye.b,{to:"/invitations"},i.a.createElement(f.a,{variant:"contained",color:"primary",className:[t.button,t.customColor]},"Invitations")),i.a.createElement(ye.b,{to:"/"},i.a.createElement(f.a,{variant:"contained",color:"primary",className:[t.button,t.customColor]},"My Events")),i.a.createElement(fe,{open:n,handleClose:function(){return e.setState({dialogOpen:!1})},createEvent:this.createEvent}))}}]),t}(a.Component);Ie.defaultProps={onUpdate:null};var Ce=Object(d.withStyles)(function(e){return{button:{margin:e.spacing.unit,float:"right"},input:{display:"none"},customColor:{color:e.palette.getContrastText(Ee.a[400]),backgroundColor:Ee.a[400],"&:hover":{backgroundColor:Ee.a[600]}}}})(Ie),Oe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getEvents=function(){h.a.get("".concat(ue,"/users/").concat(n.props.userId,"/events")).then(function(e){var t=e.data;console.log(t),n.setState({events:t})})},n.openChat=function(e){n.setState({chatOpen:!0,eventId:e},function(){return n.getComments(e)})},n.handleSendComment=function(e){h.a.post("".concat(ue,"/events/").concat(n.state.eventId,"/comments"),null,{params:{"comment[user_id]":n.props.userId,"comment[body]":e}}).then(n.getComments).then(le)},n.getComments=function(){h.a.get("".concat(ue,"/events/").concat(n.state.eventId,"/comments")).then(function(e){var t=e.data,a=t.comments,i=t.users;n.setState({comments:a.map(function(e){var t=e.body,n=e.user_id;return"".concat(i.find(function(e){return e.id===n}).name,": ").concat(t)})})})},n.closeDialog=function(){n.setState({chatOpen:!1})},n.state={pollItemId:null,chatOpen:!1,events:[],comments:[]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getEvents()}},{key:"render",value:function(){var e=this,t=this.state,n=t.chatOpen,a=t.events,o=this.props.userId;return i.a.createElement("div",null,i.a.createElement(Ce,{onUpdate:this.getEvents,userId:o}),i.a.createElement(x,{open:n,handleClose:this.closeDialog,onSend:this.handleSendComment,comments:this.state.comments}),i.a.createElement("div",{style:{paddingTop:100,marginRight:100,marginLeft:100,marginBottom:100,height:window.innerHeight}},i.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"scroll"}},a.map(function(t){return i.a.createElement(de,{openChat:e.openChat,startDate:t.start_time,endDate:t.end_time,eventId:t.id,creator:e.props.userId,title:t.name,location:t.location,description:t.description,invitationId:null})}))))}}]),t}(a.Component),je=Object(d.withStyles)(function(e){return{}})(Oe),Se=n(36),we=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getEvents=function(){h.a.get("".concat(ue,"/users/").concat(n.props.userId,"/invitations")).then(function(e){var t=e.data;console.log(t);var a=t.events.map(function(e){return Object(_.a)({},e,{invitation_id:t.invitations.find(function(t){var n=t.event_id;return e.id===n}).id})});n.setState({events:a})})},n.openChat=function(e){n.setState({chatOpen:!0,eventId:e},function(){return n.getComments(e)})},n.handleSendComment=function(e){h.a.post("".concat(ue,"/events/").concat(n.state.eventId,"/comments"),null,{params:{"comment[user_id]":n.props.userId,"comment[body]":e}}).then(n.getComments).then(le)},n.getComments=function(){h.a.get("".concat(ue,"/events/").concat(n.state.eventId,"/comments")).then(function(e){var t=e.data,a=t.comments,i=t.users;n.setState({comments:a.map(function(e){var t=e.body,n=e.user_id;return"".concat(i.find(function(e){return e.id===n}).name,": ").concat(t)})})})},n.closeDialog=function(){n.setState({chatOpen:!1})},n.state={pollItemId:null,chatOpen:!1,events:[],comments:[]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getEvents()}},{key:"render",value:function(){var e=this,t=this.state,n=t.chatOpen,a=t.events,o=this.props.userId;return i.a.createElement("div",null,i.a.createElement(Ce,{onUpdate:this.getEvents,userId:o}),i.a.createElement(x,{open:n,handleClose:this.closeDialog,onSend:this.handleSendComment,comments:this.state.comments}),i.a.createElement("div",{style:{paddingTop:100,marginRight:100,marginLeft:100,marginBottom:100,height:window.innerHeight}},i.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"scroll"}},a.map(function(t){return i.a.createElement(de,{openChat:e.openChat,startDate:t.start_time,endDate:t.end_time,eventId:t.id,creator:t.user_id,title:t.name,location:t.location,description:t.description,invitationId:t.invitation_id})}))))}}]),t}(a.Component),ke=Object(d.withStyles)(function(e){return{}})(we),Ne=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSend=function(){var t=e.state.text;e.setState({text:null}),document.getElementById("userId").value="",e.props.onSend(t)},e.state={pollItems:[{beginsAt:null,until:null}],title:null,description:null,participants:null},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(O.a,{open:!0,"aria-labelledby":"form-dialog-title"},i.a.createElement(k.a,{id:"form-dialog-title"},"SignIn"),i.a.createElement(S.a,null,i.a.createElement(I.a,{id:"userId",style:{paddingTop:20,width:"68%",paddingRight:24},onChange:function(t){return e.setState({text:t.target.value})},autoFocus:!0,type:"number",margin:"dense",onKeyPress:function(t){console.log("Pressed keyCode ".concat(t.key)),"Enter"===t.key&&(e.handleSend(),t.preventDefault())}}),i.a.createElement(f.a,{onClick:this.handleSend,color:"primary",style:{verticalAlign:"bottom"}},"Login")))}}]),t}(i.a.Component),xe=Object(d.withStyles)(function(e){return{button:{margin:2*e.spacing.unit,verticalAlign:"bottom"},input:{display:"none"}}})(Ne),_e=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userId:null},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.userId;return i.a.createElement("div",{style:{position:"fixed",top:0,left:0}},i.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%"}},t?i.a.createElement(ye.a,null,i.a.createElement(Se.c,null,i.a.createElement(Se.a,{path:"/invitations"},i.a.createElement(ke,{userId:t})),i.a.createElement(Se.a,{path:"/my-events"},i.a.createElement(je,{userId:t})),i.a.createElement(Se.a,{path:"/my-events"},i.a.createElement(je,{userId:t})),i.a.createElement(Se.a,{path:"/sign-up"},i.a.createElement(je,{userId:t})),i.a.createElement(Se.a,{path:"/"},i.a.createElement(je,{userId:t})))):i.a.createElement(xe,{onSend:function(t){return e.setState({userId:t})}})),i.a.createElement(re.NotificationContainer,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(_e,null),document.getElementById("main")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[249,2,1]]]);
//# sourceMappingURL=main.f3a787b3.chunk.js.map